<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Sangwin-Game-Engine: BoundingSphere.h Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.2 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="../../main.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<div class="header">
  <div class="headertitle">
<h1>BoundingSphere.h</h1>  </div>
</div>
<div class="contents">
<a href="../../d6/d7f/_bounding_sphere_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="preprocessor">#ifndef BOUNDINGSPHERE_H</span>
<a name="l00002"></a>00002 <span class="preprocessor"></span><span class="preprocessor">#define BOUNDINGSPHERE_H</span>
<a name="l00003"></a>00003 <span class="preprocessor"></span>
<a name="l00004"></a>00004 
<a name="l00006"></a>00006 <span class="comment">//                                                                            //</span>
<a name="l00007"></a>00007 <span class="comment">//                                 DEFINITION                                 //</span>
<a name="l00008"></a>00008 <span class="comment">//                                                                            //</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 
<a name="l00012"></a>00012 <span class="preprocessor">#include &quot;<a class="code" href="../../dc/d4c/_bounding_volume_8h.html">headers/collision/BoundingVolume.h</a>&quot;</span>
<a name="l00013"></a>00013 <span class="preprocessor">#include &quot;<a class="code" href="../../d1/d8e/_vec2_8h.html">headers/maths/Vec2.h</a>&quot;</span>
<a name="l00014"></a>00014 <span class="preprocessor">#include &quot;<a class="code" href="../../d3/d42/_vec3_8h.html">headers/maths/Vec3.h</a>&quot;</span>
<a name="l00015"></a>00015 <span class="preprocessor">#include &lt;float.h&gt;</span>
<a name="l00016"></a>00016 
<a name="l00032"></a>00032 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00033"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html">00033</a> <span class="keyword">class </span><a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere</a>: <span class="keyword">public</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume</a>&lt;V&gt; {
<a name="l00034"></a>00034 
<a name="l00035"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a3a66066bba0b0de52f8fdc0cefcd1e4e">00035</a>     <span class="keyword">friend</span> <span class="keyword">class </span><a class="code" href="../../dd/dac/class_get_node.html" title="The GetNode class provides an interface for creating all types of Node and BoundingVolume.">GetNode</a>; 
<a name="l00036"></a>00036     
<a name="l00037"></a>00037 <span class="keyword">private</span>:
<a name="l00038"></a>00038 
<a name="l00039"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1">00039</a>     <span class="keywordtype">float</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1" title="pre-scale radius">normalRadius</a>; 
<a name="l00040"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147">00040</a>     <span class="keywordtype">float</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>; 
<a name="l00041"></a>00041 
<a name="l00042"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227">00042</a>     <a class="code" href="../../d6/d6f/class_s_ptr.html">SPtr&lt;V&gt;</a> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>; 
<a name="l00043"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c">00043</a>     <a class="code" href="../../d6/d6f/class_s_ptr.html">SPtr&lt;V&gt;</a> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>; 
<a name="l00044"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8">00044</a>     <a class="code" href="../../d6/d6f/class_s_ptr.html">SPtr&lt;Vec2&gt;</a> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>; 
<a name="l00045"></a>00045 
<a name="l00046"></a>00046 <span class="keyword">public</span>:
<a name="l00047"></a>00047 
<a name="l00053"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#aa386806330e717b5ca3f66a0c84aa822">00053</a>     <a class="code" href="../../d3/d5e/class_bounding_sphere.html#adca1ec44c0811a2ee57d137f3cc236a9" title="Default constructor.">BoundingSphere</a>(<span class="keyword">const</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere</a>&amp; rhs)
<a name="l00054"></a>00054     :<a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume</a>&lt;V&gt;(rhs),
<a name="l00055"></a>00055      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1" title="pre-scale radius">normalRadius</a>(rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1" title="pre-scale radius">normalRadius</a>),
<a name="l00056"></a>00056      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>(rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>),
<a name="l00057"></a>00057      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>(new V(*rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>)),
<a name="l00058"></a>00058      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>(new V(*rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>)),
<a name="l00059"></a>00059      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>(new <a class="code" href="../../d9/d7f/class_vec2.html" title="This class represents a Vector of size 2.">Vec2</a>(*rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>))
<a name="l00060"></a>00060     {
<a name="l00061"></a>00061         <a class="code" href="../../d8/d5a/class_bounding_volume.html#a5a07aa9dddee0594870c8e2a7c35c3b7" title="The type of this BoundingVolume.">type</a> = <a class="code" href="../../d8/d5a/class_bounding_volume.html#ada826fc0eb7e7d5c4ed778f7bdaa5c65a6683421571fd9e16e7705e842e4dd573" title="BoundingSphere.">SPHERE</a>;
<a name="l00062"></a>00062     }
<a name="l00069"></a>00069     <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere</a>&amp; <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a783d27d25b50fdf3fa169c0013642f85" title="Assignment operator.">operator=</a>(<span class="keyword">const</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere</a>&amp; rhs);
<a name="l00073"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a43854476c6c24c02e097ee8c6a5e13c4">00073</a>     <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a43854476c6c24c02e097ee8c6a5e13c4" title="Destructor.">~BoundingSphere</a>(){}
<a name="l00074"></a>00074 
<a name="l00081"></a>00081     <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#ab5d304a9c1615fb689162f1501fd2324" title="Set the size of this BoundingSphere.">setSize</a>(<span class="keyword">const</span> V&amp; dim);
<a name="l00087"></a>00087     <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aaf6b6e21a20c0dcaa463a46a76277707" title="Return the current radius of this BoundinSphere.">getRadius</a>();
<a name="l00088"></a>00088     <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a54b6d68cdca6902c3d8b8f10145a7577" title="Wraps the model (specified by the list of vertices) in this BoundingVolume.">wrap</a>(<span class="keywordtype">float</span>* <a class="code" href="../../d8/d5a/class_bounding_volume.html#aeedafb9f62e1283aa2ee0883d6c3530b">vertices</a>, <span class="keywordtype">int</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html#aa7c70e13725ba31d82d78eb9244749c2">vLength</a>);
<a name="l00089"></a>00089     <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a54b6d68cdca6902c3d8b8f10145a7577" title="Wraps the model (specified by the list of vertices) in this BoundingVolume.">wrap</a>(<a class="code" href="../../d3/d14/class_array_list.html" title="The ArrayList class works like a Java ArrayList.">ArrayList</a>&lt;<a class="code" href="../../d6/d6f/class_s_ptr.html" title="The SPtr class is reference counted smart pointer implementation.">SPtr</a>&lt;<a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;</a> &gt; &gt;&amp; bounds, <span class="keywordtype">int</span> to, <span class="keywordtype">int</span> from);
<a name="l00090"></a>00090     <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a0514a1aca89701ef30fcfb501586fb84" title="Transform the world position of this BoundingVolume by the given Trfm.">applyTransform</a>(<a class="code" href="../../d9/dcf/class_trfm.html" title="The Trfm class is an abstract class that is implemented by Trfm2 and Trfm3.">Trfm</a>&amp; worldTransform);
<a name="l00091"></a>00091     <span class="keywordtype">bool</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a68b7e62ead5c821efac0ba8530356060" title="Check if this BoundingVolume collides with the given one.">collides</a>(<span class="keyword">const</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;</a>&amp; bounds);
<a name="l00092"></a>00092     <a class="code" href="../../d6/d6f/class_s_ptr.html" title="The SPtr class is reference counted smart pointer implementation.">SPtr&lt;BoundingVolume&lt;V&gt;</a> &gt; <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5f56f2110a26e8cf01517688532e1022" title="Create a clone of this BoundingVolume.">clone</a>();
<a name="l00093"></a>00093 
<a name="l00094"></a>00094 <span class="keyword">protected</span>:
<a name="l00095"></a>00095 
<a name="l00099"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#adca1ec44c0811a2ee57d137f3cc236a9">00099</a>     <a class="code" href="../../d3/d5e/class_bounding_sphere.html#adca1ec44c0811a2ee57d137f3cc236a9" title="Default constructor.">BoundingSphere</a>()
<a name="l00100"></a>00100     :<a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume</a>&lt;V&gt;(),
<a name="l00101"></a>00101      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>(new V()),
<a name="l00102"></a>00102      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>(new V()),
<a name="l00103"></a>00103      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>(new <a class="code" href="../../d9/d7f/class_vec2.html" title="This class represents a Vector of size 2.">Vec2</a>())
<a name="l00104"></a>00104     {
<a name="l00105"></a>00105         <a class="code" href="../../d8/d5a/class_bounding_volume.html#a5a07aa9dddee0594870c8e2a7c35c3b7" title="The type of this BoundingVolume.">type</a> = <a class="code" href="../../d8/d5a/class_bounding_volume.html#ada826fc0eb7e7d5c4ed778f7bdaa5c65a6683421571fd9e16e7705e842e4dd573" title="BoundingSphere.">SPHERE</a>;
<a name="l00106"></a>00106     }
<a name="l00114"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#aca9f6397de4bf8eda0ad578f281d22e2">00114</a>     <a class="code" href="../../d3/d5e/class_bounding_sphere.html#adca1ec44c0811a2ee57d137f3cc236a9" title="Default constructor.">BoundingSphere</a>(<span class="keyword">const</span> V&amp; pos, <span class="keywordtype">float</span> rad)
<a name="l00115"></a>00115     :<a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume</a>&lt;V&gt;(pos),
<a name="l00116"></a>00116      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1" title="pre-scale radius">normalRadius</a>(rad),
<a name="l00117"></a>00117      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>(rad),
<a name="l00118"></a>00118      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>(new V()),
<a name="l00119"></a>00119      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>(new V()),
<a name="l00120"></a>00120      <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>(new <a class="code" href="../../d9/d7f/class_vec2.html" title="This class represents a Vector of size 2.">Vec2</a>())
<a name="l00121"></a>00121     {
<a name="l00122"></a>00122         <a class="code" href="../../d8/d5a/class_bounding_volume.html#a5a07aa9dddee0594870c8e2a7c35c3b7" title="The type of this BoundingVolume.">type</a> = <a class="code" href="../../d8/d5a/class_bounding_volume.html#ada826fc0eb7e7d5c4ed778f7bdaa5c65a6683421571fd9e16e7705e842e4dd573" title="BoundingSphere.">SPHERE</a>;
<a name="l00123"></a>00123     }
<a name="l00124"></a>00124 
<a name="l00125"></a>00125     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::localExtent</a>;
<a name="l00126"></a>00126     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::worldExtent</a>;
<a name="l00127"></a>00127     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::localPos</a>;
<a name="l00128"></a>00128     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::worldPos</a>;
<a name="l00129"></a>00129     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::type</a>;
<a name="l00130"></a>00130     <span class="keyword">using</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;::SPHERE</a>;
<a name="l00131"></a>00131 };
<a name="l00132"></a>00132 
<a name="l00133"></a>00133 
<a name="l00135"></a>00135 <span class="comment">//                                                                            //</span>
<a name="l00136"></a>00136 <span class="comment">//                               IMPLEMENTATION                               //</span>
<a name="l00137"></a>00137 <span class="comment">//                                                                            //</span>
<a name="l00139"></a>00139 <span class="comment"></span>
<a name="l00140"></a>00140 
<a name="l00141"></a>00141 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00142"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a783d27d25b50fdf3fa169c0013642f85">00142</a> <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere&lt;V&gt;</a>&amp; <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a783d27d25b50fdf3fa169c0013642f85" title="Assignment operator.">BoundingSphere&lt;V&gt;::operator =</a>(<span class="keyword">const</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere</a>&amp; rhs) {
<a name="l00143"></a>00143 
<a name="l00144"></a>00144     <a class="code" href="../../d8/d5a/class_bounding_volume.html#ac732f87d664e3b0a50161c153aacec1e" title="Assignment operator.">BoundingVolume&lt;V&gt;::operator =</a>(rhs);
<a name="l00145"></a>00145 
<a name="l00146"></a>00146     type = SPHERE;
<a name="l00147"></a>00147     normalRadius = rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a9d58c7825a3c5571cda3e78ea17b34f1" title="pre-scale radius">normalRadius</a>;
<a name="l00148"></a>00148     radius = rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>;
<a name="l00149"></a>00149     *tmpV0 = *rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5b9d5dcf8e13c43843a7989f1bc3a227" title="temp, used for speed">tmpV0</a>;
<a name="l00150"></a>00150     *tmpV1 = *rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#a316b46f7869b0e173b932b2a8886d57c" title="temp, used for speed">tmpV1</a>;
<a name="l00151"></a>00151     *tmpV2 = *rhs.<a class="code" href="../../d3/d5e/class_bounding_sphere.html#aea702fb01ac5b939ce4c98e6006d6fa8" title="temp, used for speed">tmpV2</a>;
<a name="l00152"></a>00152 
<a name="l00153"></a>00153     <span class="keywordflow">return</span> *<span class="keyword">this</span>;
<a name="l00154"></a>00154 }
<a name="l00155"></a>00155 
<a name="l00156"></a>00156 
<a name="l00157"></a>00157 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00158"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#ab5d304a9c1615fb689162f1501fd2324">00158</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#ab5d304a9c1615fb689162f1501fd2324" title="Set the size of this BoundingSphere.">BoundingSphere&lt;V&gt;::setSize</a>(<span class="keyword">const</span> V&amp; dim) {
<a name="l00159"></a>00159 
<a name="l00160"></a>00160     normalRadius = dim.v[0]/2;
<a name="l00161"></a>00161     radius = normalRadius;
<a name="l00162"></a>00162     localExtent-&gt;setTo(dim);
<a name="l00163"></a>00163     worldExtent-&gt;setTo(dim);
<a name="l00164"></a>00164 }
<a name="l00165"></a>00165 
<a name="l00166"></a>00166 
<a name="l00167"></a>00167 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00168"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#aaf6b6e21a20c0dcaa463a46a76277707">00168</a> <span class="keyword">inline</span> <span class="keywordtype">float</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#aaf6b6e21a20c0dcaa463a46a76277707" title="Return the current radius of this BoundinSphere.">BoundingSphere&lt;V&gt;::getRadius</a>() {
<a name="l00169"></a>00169 
<a name="l00170"></a>00170     <span class="keywordflow">return</span> radius;
<a name="l00171"></a>00171 }
<a name="l00172"></a>00172 
<a name="l00173"></a>00173 
<a name="l00174"></a>00174 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00175"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a54b6d68cdca6902c3d8b8f10145a7577">00175</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a54b6d68cdca6902c3d8b8f10145a7577" title="Wraps the model (specified by the list of vertices) in this BoundingVolume.">BoundingSphere&lt;V&gt;::wrap</a>(<span class="keywordtype">float</span>* vertices, <span class="keywordtype">int</span> vLength) {
<a name="l00176"></a>00176 
<a name="l00177"></a>00177     <span class="comment">//Initialise the min and max of the box that encompasses this sphere</span>
<a name="l00178"></a>00178     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tmpV0-&gt;l; i++) {
<a name="l00179"></a>00179         tmpV0-&gt;v[i] = FLT_MAX;
<a name="l00180"></a>00180         tmpV1-&gt;v[i] = -FLT_MAX;
<a name="l00181"></a>00181     }
<a name="l00182"></a>00182 
<a name="l00183"></a>00183     <span class="comment">//Find the min and max extents of each dimension, and store in temps</span>
<a name="l00184"></a>00184     <span class="keywordtype">float</span> v;
<a name="l00185"></a>00185     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> vert=0; vert&lt;vLength; vert+=3) {
<a name="l00186"></a>00186         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;localExtent-&gt;l; i++) {
<a name="l00187"></a>00187             v = vertices[vert];
<a name="l00188"></a>00188             <span class="keywordflow">if</span>(v &lt; tmpV0-&gt;v[i]) {
<a name="l00189"></a>00189                 tmpV0-&gt;v[i] = v;
<a name="l00190"></a>00190             }
<a name="l00191"></a>00191             <span class="keywordflow">if</span>(v &gt; tmpV1-&gt;v[i]) {
<a name="l00192"></a>00192                 tmpV1-&gt;v[i] = v;
<a name="l00193"></a>00193             }
<a name="l00194"></a>00194         }
<a name="l00195"></a>00195     }
<a name="l00196"></a>00196 
<a name="l00197"></a>00197     <span class="comment">//Calculate the centre, localPos, of this BoundingSphere</span>
<a name="l00198"></a>00198     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;localPos-&gt;l; i++) {
<a name="l00199"></a>00199         localPos-&gt;v[i] = tmpV0-&gt;v[i] + (tmpV1-&gt;v[i] - tmpV0-&gt;v[i])/2;
<a name="l00200"></a>00200     }
<a name="l00201"></a>00201 
<a name="l00202"></a>00202     <span class="comment">//find the radius</span>
<a name="l00203"></a>00203     <span class="keywordtype">float</span> dist2 = 0;
<a name="l00204"></a>00204     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tmpV0-&gt;l; i++) {
<a name="l00205"></a>00205         dist2 += (tmpV1-&gt;v[i] - tmpV0-&gt;v[i])*(tmpV1-&gt;v[i] - tmpV0-&gt;v[i]);
<a name="l00206"></a>00206     }
<a name="l00207"></a>00207 
<a name="l00208"></a>00208     <span class="comment">//Update size data</span>
<a name="l00209"></a>00209     normalRadius = sqrt(dist2)/2;
<a name="l00210"></a>00210     radius = normalRadius;
<a name="l00211"></a>00211     localExtent-&gt;setTo(radius);
<a name="l00212"></a>00212     worldExtent-&gt;setTo(radius);
<a name="l00213"></a>00213 }
<a name="l00214"></a>00214 
<a name="l00215"></a>00215 
<a name="l00216"></a>00216 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00217"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a77fdc8ac5d305eeaf3527cca110b7339">00217</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a54b6d68cdca6902c3d8b8f10145a7577" title="Wraps the model (specified by the list of vertices) in this BoundingVolume.">BoundingSphere&lt;V&gt;::wrap</a>(<a class="code" href="../../d3/d14/class_array_list.html" title="The ArrayList class works like a Java ArrayList.">ArrayList</a>&lt;<a class="code" href="../../d6/d6f/class_s_ptr.html" title="The SPtr class is reference counted smart pointer implementation.">SPtr</a>&lt;<a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;</a> &gt; &gt;&amp; bounds, <span class="keywordtype">int</span> to, <span class="keywordtype">int</span> from) {
<a name="l00218"></a>00218 
<a name="l00219"></a>00219     <span class="comment">//Initialise the min and max of the box that encompasses this sphere</span>
<a name="l00220"></a>00220     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tmpV0-&gt;l; i++) {
<a name="l00221"></a>00221         tmpV0-&gt;v[i] = FLT_MAX;
<a name="l00222"></a>00222         tmpV1-&gt;v[i] = -FLT_MAX;
<a name="l00223"></a>00223     }
<a name="l00224"></a>00224 
<a name="l00225"></a>00225     <span class="comment">//Find the min and max extents of each dimensions, and store in temps</span>
<a name="l00226"></a>00226     <span class="keywordtype">float</span> v = 0;
<a name="l00227"></a>00227     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> count=from; count&lt;to; count++) {
<a name="l00228"></a>00228         tmpV2-&gt;setTo(bounds.get(count)-&gt;getWorldExtent());
<a name="l00229"></a>00229 
<a name="l00230"></a>00230         <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;tmpV2-&gt;l; i++) {
<a name="l00231"></a>00231             v = bounds.get(count)-&gt;getWorldPos().v[i];
<a name="l00232"></a>00232             <span class="keywordflow">if</span>(v - tmpV2-&gt;v[i] &lt; tmpV0-&gt;v[i]) {
<a name="l00233"></a>00233                 tmpV0-&gt;v[i] = v - tmpV2-&gt;v[0];
<a name="l00234"></a>00234             }
<a name="l00235"></a>00235             <span class="keywordflow">if</span>(v + tmpV2-&gt;v[0] &gt; tmpV1-&gt;v[i]) {
<a name="l00236"></a>00236                 tmpV1-&gt;v[1] = v + tmpV2-&gt;v[0];
<a name="l00237"></a>00237             }
<a name="l00238"></a>00238         }
<a name="l00239"></a>00239     }
<a name="l00240"></a>00240 
<a name="l00241"></a>00241      <span class="comment">//Calculate the centre, localPos, of this BoundingSphere</span>
<a name="l00242"></a>00242     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=0; i&lt;localPos-&gt;l; i++) {
<a name="l00243"></a>00243         localPos-&gt;v[i] = tmpV0-&gt;v[i] + (tmpV1-&gt;v[i] - tmpV0-&gt;v[i])/2;
<a name="l00244"></a>00244     }
<a name="l00245"></a>00245 
<a name="l00246"></a>00246     <span class="comment">//find the radius</span>
<a name="l00247"></a>00247     <span class="keywordtype">float</span> max = tmpV1-&gt;v[0] - tmpV0-&gt;v[0];
<a name="l00248"></a>00248     <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i=1; i&lt;tmpV0-&gt;l; i++)
<a name="l00249"></a>00249         max = (max&gt;(tmpV1-&gt;v[i] - tmpV0-&gt;v[i]))?max:(tmpV1-&gt;v[i] - tmpV0-&gt;v[i]);
<a name="l00250"></a>00250 
<a name="l00251"></a>00251     <span class="comment">//update size data</span>
<a name="l00252"></a>00252     normalRadius = max/2;
<a name="l00253"></a>00253     radius = normalRadius;
<a name="l00254"></a>00254     localExtent-&gt;setTo(radius);
<a name="l00255"></a>00255     worldExtent-&gt;setTo(radius);
<a name="l00256"></a>00256 }
<a name="l00257"></a>00257 
<a name="l00258"></a>00258 
<a name="l00259"></a>00259 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00260"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a0514a1aca89701ef30fcfb501586fb84">00260</a> <span class="keywordtype">void</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a0514a1aca89701ef30fcfb501586fb84" title="Transform the world position of this BoundingVolume by the given Trfm.">BoundingSphere&lt;V&gt;::applyTransform</a>(<a class="code" href="../../d9/dcf/class_trfm.html" title="The Trfm class is an abstract class that is implemented by Trfm2 and Trfm3.">Trfm</a>&amp; worldTransform) {
<a name="l00261"></a>00261 
<a name="l00262"></a>00262     <span class="comment">//apply the position transform</span>
<a name="l00263"></a>00263     worldPos-&gt;setTo(*localPos);
<a name="l00264"></a>00264     worldTransform.<a class="code" href="../../d9/dcf/class_trfm.html#aa821032a88fdf4d37c7cb0aee351aeaa" title="Multiply the given Vec through the affine transformation matrix.">apply</a>(*worldPos);
<a name="l00265"></a>00265 
<a name="l00266"></a>00266     <span class="comment">//apply the size transform</span>
<a name="l00267"></a>00267     radius = normalRadius*worldTransform.<a class="code" href="../../d9/dcf/class_trfm.html#a3bafe403ebbdccbcb96301bd5103b80b" title="Get the scale of this transform.">getScale</a>();
<a name="l00268"></a>00268     localExtent-&gt;setTo(radius);
<a name="l00269"></a>00269     worldExtent-&gt;setTo(radius);
<a name="l00270"></a>00270 }
<a name="l00271"></a>00271 
<a name="l00272"></a>00272 
<a name="l00273"></a>00273 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00274"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a68b7e62ead5c821efac0ba8530356060">00274</a> <span class="keywordtype">bool</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a68b7e62ead5c821efac0ba8530356060" title="Check if this BoundingVolume collides with the given one.">BoundingSphere&lt;V&gt;::collides</a>(<span class="keyword">const</span> <a class="code" href="../../d8/d5a/class_bounding_volume.html" title="The BoundingVolume class is an abstract class which can be used to wrap any Bound node in a scenegrap...">BoundingVolume&lt;V&gt;</a>&amp; bounds) {
<a name="l00275"></a>00275 
<a name="l00276"></a>00276     <span class="comment">//If the given volume is a sphere, check for collisions based on distance</span>
<a name="l00277"></a>00277     <span class="comment">//and size of radius</span>
<a name="l00278"></a>00278     <span class="keywordflow">if</span>(bounds.<a class="code" href="../../d8/d5a/class_bounding_volume.html#a5a07aa9dddee0594870c8e2a7c35c3b7" title="The type of this BoundingVolume.">type</a> == SPHERE) {
<a name="l00279"></a>00279         <span class="keywordflow">if</span>(worldPos-&gt;dist(bounds.<a class="code" href="../../d8/d5a/class_bounding_volume.html#a45901aad91fc44212e41c4e2af82b527" title="Get the world position of this BoundingVolume.">getWorldPos</a>()) &lt;= radius + <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere&lt;V&gt;</a>&amp; <span class="keyword">&gt;</span> (bounds).<a class="code" href="../../d3/d5e/class_bounding_sphere.html#ac37dc8c56bf210f5cc457c1c9597a147" title="current radius">radius</a>) {
<a name="l00280"></a>00280             <span class="keywordflow">return</span> <span class="keyword">true</span>;
<a name="l00281"></a>00281         }
<a name="l00282"></a>00282     }
<a name="l00283"></a>00283     <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00284"></a>00284 }
<a name="l00285"></a>00285 
<a name="l00286"></a>00286 
<a name="l00287"></a>00287 <span class="keyword">template</span>&lt;<span class="keyword">class</span> V&gt;
<a name="l00288"></a><a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5f56f2110a26e8cf01517688532e1022">00288</a> <a class="code" href="../../d6/d6f/class_s_ptr.html" title="The SPtr class is reference counted smart pointer implementation.">SPtr&lt;BoundingVolume&lt;V&gt;</a> &gt; <a class="code" href="../../d3/d5e/class_bounding_sphere.html#a5f56f2110a26e8cf01517688532e1022" title="Create a clone of this BoundingVolume.">BoundingSphere&lt;V&gt;::clone</a>() {
<a name="l00289"></a>00289 
<a name="l00290"></a>00290     <span class="keywordflow">return</span> <a class="code" href="../../d6/d6f/class_s_ptr.html" title="The SPtr class is reference counted smart pointer implementation.">SPtr&lt;BoundingVolume&lt;V&gt;</a> &gt;(<span class="keyword">new</span> <a class="code" href="../../d3/d5e/class_bounding_sphere.html" title="This class implements the BoundingVolume class.">BoundingSphere&lt;V&gt;</a>(*this));
<a name="l00291"></a>00291 }
<a name="l00292"></a>00292 
<a name="l00293"></a>00293 
<a name="l00294"></a>00294 <span class="preprocessor">#endif </span><span class="comment">/* BOUNDINGSPHERE_H */</span>
<a name="l00295"></a>00295 
<a name="l00296"></a>00296 
<a name="l00297"></a>00297 
<a name="l00298"></a>00298 
<a name="l00299"></a>00299 
</pre></div></div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Sun Aug 21 2011 19:09:31 for Sangwin-Game-Engine by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.7.2 </small></address>
</body>
</html>
